--Tạo Các Bảng
CREATE DATABASE QuanLiDay
GO
USE QuanLiDay
GO
-- MONHOC
CREATE TABLE MONHOC (
 MAMH VARCHAR(10) PRIMARY KEY,
 TENMH VARCHAR(100) NOT NULL);

-- GIAOVIEN 
CREATE TABLE GIAOVIEN (
 MAGV VARCHAR(10) PRIMARY KEY,
 HOTEN VARCHAR(100) NOT NULL,
 SODT VARCHAR(15),
 MAKHOA VARCHAR(10),
 FOREIGN KEY (MAKHOA) REFERENCES KHOA(MAKHOA));

-- KHOA 
CREATE TABLE KHOA (
 MAKHOA VARCHAR(10) PRIMARY KEY,
 TENKHOA VARCHAR(100) NOT NULL,
 DTKHOA VARCHAR(15));

-- GIANGDAY 
CREATE TABLE GIANGDAY (
 MAMH VARCHAR(10),
 MAGV VARCHAR(10),
 MALOP VARCHAR(10),
 HKY VARCHAR(10),
 NAMHOC VARCHAR(10),
 PRIMARY KEY (MAMH, MAGV, MALOP),
 FOREIGN KEY (MAMH) REFERENCES MONHOC(MAMH),
 FOREIGN KEY (MAGV) REFERENCES GIAOVIEN(MAGV),
 FOREIGN KEY (MALOP) REFERENCES LOP(MALOP));

-- LOP
CREATE TABLE LOP (
 MALOP VARCHAR(10) PRIMARY KEY,
 TENLOP VARCHAR(100) NOT NULL,
 SISO INT,
 MAKHOA VARCHAR(10),
 FOREIGN KEY (MAKHOA) REFERENCES KHOA(MAKHOA));

-- LICHDAY
CREATE TABLE LICHDAY (
 ID INT PRIMARY KEY,
 NGAYDAY DATE NOT NULL,
 TUTIET INT,
 DENTIET INT,
 BAIDAY VARCHAR(200),
 GHICHU TEXT,
 LYTHUYET INT,
 SOPHONG VARCHAR(10),
 FOREIGN KEY (SOPHONG) REFERENCES PHONG(SOPHONG));

-- PHONG
CREATE TABLE PHONG (
SOPHONG VARCHAR(10) PRIMARY KEY,
CHUCNANG VARCHAR(100));

---Cài đặt lược đồ quan hệ vào trong hệ quản trị CSDL SQL Server

-- MONHOC
INSERT INTO MONHOC (MAMH, TENMH) VALUES
('MATH101', 'Toán Đại Cương'),
('ENG202', 'Tiếng Anh Cơ Bản'),
('PHYS303', 'Vật Lý Đại Cương'),
('CHEM404', 'Hóa Học Đại Cương'),
('CS105', 'Lập Trình Cơ Bản');

-- KHOA
INSERT INTO KHOA (MAKHOA, TENKHOA, DTKHOA) VALUES
('CS', 'Công Nghệ Thông Tin', '0243657890'),
('MA', 'Toán Học', '0243587432'),
('PH', 'Vật Lý', '0243492376'),
('HOA', 'Hóa Học', '0243392387'),
('ANH', 'Ngoại Ngữ', '0243356738');

--GIAOVIEN
INSERT INTO GIAOVIEN (MAGV, HOTEN, SODT, MAKHOA) VALUES
('GV001', 'Nguyễn Văn A', '0912345678', 'CS'),
('GV002', 'Trần Thị B', '0912987654', 'MA'),
('GV003', 'Lê Thị C', '0912123456', 'PH'),
('GV004', 'Phan Văn D', '0912234567', 'HOA'),
('GV005', 'Ngô Thị E', '0912345678', 'ANH');

--LOP
INSERT INTO LOP (MALOP, TENLOP, SISO, MAKHOA) VALUES
('L001', 'Lớp 1A', 30, 'CS'),
('L002', 'Lớp 2B', 25, 'MA'),
('L003', 'Lớp 3C', 28, 'PH'),
('L004', 'Lớp 4D', 32, 'HOA'),
('L005', 'Lớp 5E', 30, 'ANH');

--GIANGDAY
INSERT INTO GIANGDAY (MAMH, MAGV, MALOP, HKY, NAMHOC) VALUES
('MATH101', 'GV001', 'L001', 'HK1', '2025'),
('ENG202', 'GV002', 'L002', 'HK1', '2025'),
('PHYS303', 'GV003', 'L003', 'HK2', '2025'),
('CHEM404', 'GV004', 'L004', 'HK1', '2025'),
('CS105', 'GV005', 'L005', 'HK2', '2025');

-- PHONG
INSERT INTO PHONG (SOPHONG, CHUCNANG) VALUES
('P01', 'Lý thuyết'),
('P02', 'Thực hành máy tính'),
('P03', 'Phòng nghe nhìn'),
('P04', 'Xưởng cơ khí'),
('P05', 'Lý thuyết');

-- LICHDAY
INSERT INTO LICHDAY (ID, NGAYDAY, TUTIET, DENTIET, BAIDAY, GHICHU, LYTHUYET, SOPHONG) VALUES
(1, '2025-09-01', 1, 3, 'Giới thiệu môn học', 'Không có', 2, 'P01'),
(2, '2025-09-02', 4, 6, 'Bài học thực hành', 'Cần máy tính', 1, 'P02'),
(3, '2025-09-03', 7, 9, 'Lý thuyết cơ bản', 'Cần projector', 2, 'P01'),
(4, '2025-09-04', 10, 12, 'Hướng dẫn bài tập', 'Cần phòng thí nghiệm', 1, 'P04'),
(5, '2025-09-05', 13, 15, 'Ôn tập và kiểm tra', 'Cần bảng trắng', 2, 'P05');
